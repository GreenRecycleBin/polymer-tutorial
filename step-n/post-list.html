<link rel="import" href="../components/core-ajax/core-ajax.html">
<link rel="import" href="post-service.html">
<link rel="import" href="post-card.html">

<polymer-element name="post-list" attributes="show">
  <template>
    <style>
    :host {
      display: block;
      background-color: rgba(0, 0, 0, 0);
      padding: 50px 100px;
      width: 100%;
    }
    post-card {
      margin-bottom: 30px;
    }
    #container {
      width: 100%;
    }
    #card-column {
      max-width: 450px;
      min-width: 300px;
    }
    @media (max-width: 900px) {
      :host { padding: 50px 15px; }
    }
    </style>

    <post-service id="service" posts="{{posts}}"></post-service>
    
    <div id="container" layout vertical center>
    <div id="card-column" layout vertical center>
      <template repeat="{{post in posts}}">
        <post-card
          favorite="{{post.favorite}}"
          on-favorite-tap="{{handleFavorite}}"
          hidden?="{{show == 'favorites' && !post.favorite}}">
  		  <img src="{{post.avatar}}">         
          <h2>{{post.username}}</h2>
		  <h3>{{post.text}}</h3>
        </post-card>
      </template>
    </div>
    </div>
  </template>

  <script>
  Polymer('post-list', {
    handleFavorite: function(event, detail, sender) {
      console.log('Favorite changed: ' + post.uid + ", now: " + post.favorite);
    }
  });
  </script>
</polymer-element>
