<link rel="import" href="../components/core-toolbar/core-toolbar.html">
<link rel="import" href="../components/core-tooltip/core-tooltip.html">
<link rel="import" href="../components/core-icons/core-icons.html">
<link rel="import" href="../components/core-icon-button/core-icon-button.html">
<link rel="import" href="light-box.html">

<polymer-element name="quote-card" attributes="attribution favorite item">
  <template>
    <style>
    :host {
      display: block;
      background-color: white;
      margin-bottom: 20px;
      box-shadow: rgba(0, 0, 0, 0.14902) 0px 2px 4px, rgba(0, 0, 0, 0.14902) 0px 0px 3px;
    }
    core-toolbar {
      background-color: lightblue;
    }
    .card-content {
      padding: 8px;
      position: relative;
      display: inline-block;
    }
    .card-content img {
      width: 100%;
    }
    .metadata {
      position: absolute;
      left: 8px;
      right: 8px;
      bottom: 12px;
      background-color: rgba(200, 200, 200, 0.7);
      font-size: 16px;
    }
    .metadata span {
      padding-left: 10px;
    }
    </style>


    <!-- the toolbar forms a header for each card -->
    <!--
      <core-toolbar>
        
        <span>{{item.by}}</span>
      </core-toolbar>
    -->
    <div class="container" layout horizontal center-justified>
      <div class="card-content">
        <img src="{{item.thumbnail}}" on-tap="{{showViewer}}" />

        <div class="metadata">
          <core-icon-button
            icon="{{item.favorite ? 'favorite' : 'favorite-outline'}}"
            on-click="{{toggleFavorite}}"
            core-theme-dark>
          </core-icon-button>
          <span>{{item.title}}</span>
          <span>{{item.by}}</span>
        </div>
      </div>
      <light-box id="viewer">
        <img src="{{item.image}}" class="image" core-overlay-toggle>
        <core-icon-button
          icon="{{item.favorite ? 'favorite' : 'favorite-outline' }}"
          on-click="{{toggleFavorite}}" fill="white">
        </core-icon-button>
        <p>
          <em>{{item.title}}</em>
        </p>
        <p>{{item.by}}</p>
      </light-box>
    </div>


  </template>
  <script>
  Polymer('quote-card', {
    favorite: false,
    toggleFavorite: function(event, detail, sender) {
      this.fire('favoriteclicked');
    },
    showViewer: function() {
      this.$.viewer.open();
    }
  });
  </script>
</polymer-element>
